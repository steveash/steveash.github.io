---
layout: post
title: 'Guavate: tiny library bridging Guava and Java8'
date: '2016-07-04T13:46:00.001-05:00'
author: Steve Ash
tags: 
modified_time: '2016-07-04T13:47:59.329-05:00'
blogger_id: tag:blogger.com,1999:blog-4471109663192942674.post-4491252273983517031
blogger_orig_url: http://blog.manycupsofcoffee.com/2016/07/guavate-tiny-library-bridging-guava-and.html
---

<p>Java8 is great and adds some useful abstractions to the JDK that have found popularity in the Java community via the wonderful <a href="https://github.com/google/guava">Guava commons library</a> from Google. Group discussion indicates that there will be a Guava version <a href="https://groups.google.com/d/msg/guava-discuss/ZRmDJnAq9T0/-HExv44eCAAJ">soon</a> that requires Java 8 and closes the gap between Guava and Java8. <!--more--> However, until such a time, the rest of us using Guava+Java8 need a tiny shim library for things like Collector implementation's that produce Guava Immutable collections. </p><p>As always <a href="https://groups.google.com/d/msg/guava-discuss/oWv4ee0BCHc/2HIyXjf7JSwJ">Stephen Colebourne threw together</a> exactly such a tiny utility class: <a href="https://github.com/OpenGamma/Strata/blob/master/modules/collect/src/main/java/com/opengamma/strata/collect/Guavate.java">Guavate</a>.  Unfortunately, it's buried inside of Strata, and for all of my projects I don't want to depend on Strata just for this tiny shim.  Also, I have a few Java8 shim methods myself that could use a home.  Therefore, <a href="https://github.com/steveash/guavate">I forked Colebourne's Guavate</a> and have released it to Maven Central for anyone else that wants to add this tiny shim library to their Java8 projects: </p><script type="syntaxhighlighter" class="brush: xml"><![CDATA[ <dependency>    <groupId>com.github.steveash.guavate</groupId>    <artifactId>guavate</artifactId>    <version>1.0.0</version></dependency>]]></script><p>There are Collector implementations for each of the Immutable collections: </p><script type="syntaxhighlighter" class="brush: java"><![CDATA[ List<String> inputs = Lists.newArrayList("a", "b", "c"); ImmutableSet<String> outputs = inputs.stream()     .map(String::toUpperCase)     .filter(it -> !it.startsWith("b"))     .collect(Guavate.toImmutableSet()); // outputs is an immutable set of "a" and "c" ]]></script><p>There are also some convenient methods for collecting to maps from Map.Entry (and Common-Lang3's Pair as it implements Entry): </p><script type="syntaxhighlighter" class="brush: java"><![CDATA[ Map<String, Integer> inputs = ImmutableMap.of(     "bob", 1,      "jon", 2,      "mary", 3 ); Map<String,Integer> outputs = inputs.entrySet().stream()     .map(e -> Pair.of(e.getKey().toUpperCase(), e.getValue()))     .collect(Guavate.entriesToMap()); // outputs is a map of BOB:1, JON:2, MARY:3 ]]></script><p>Converting an arbitrary iterable into a stream (which should've been in the JDK to begin with): </p><script type="syntaxhighlighter" class="brush: java"><![CDATA[ Iterable<String> values = // ... Stream<String> streamVals = Guavate.stream(values); ]]></script><p>and converting an Optional into a stream of zero or one element: </p><script type="syntaxhighlighter" class="brush: java"><![CDATA[ Optional<String> maybe = // ... Stream<String> stream = Guavate.stream(maybe); ]]></script><br/>Checkout the GitHub project page to follow for updates or submit pull requests with your own Java8 additions: <br/><a href="https://github.com/steveash/guavate">https://github.com/steveash/guavate</a>